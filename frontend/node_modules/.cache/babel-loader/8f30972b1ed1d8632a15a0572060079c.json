{"ast":null,"code":"var _jsxFileName = \"/home/anton/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/GitHub/ElbrusHP/freelance_offers/freelance-offers-aggregator/frontend/src/components/LineChart.jsx\";\nimport React from 'react';\nimport Chart from 'chart.js';\nexport default class BarsChart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.canvasRef = React.createRef();\n    this.calculateScales = this.calculateScales.bind(this);\n    this.chart = undefined;\n  }\n\n  componentDidMount() {\n    this.drawBars(this.props);\n  }\n\n  componentDidUpdate() {\n    this.chart.data.datasets[0].data = this.props.earnedByMonths;\n    this.chart.options.scales.yAxes[0].ticks.max = this.calculateScales().chartMax;\n    this.chart.options.scales.yAxes[0].ticks.stepSize = this.calculateScales().stepSize;\n    this.chart.update({\n      duration: 2000\n    });\n  }\n\n  calculateScales() {\n    let chartMax = Math.max(...this.props.earnedByMonths);\n    chartMax = chartMax + (50000 - chartMax % 50000);\n    let stepSize = chartMax >= 150000 ? 50000 : 25000;\n    return {\n      chartMax,\n      stepSize\n    };\n  }\n\n  drawBars(props) {\n    const canvas = this.canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    this.chart = new Chart(ctx, {\n      // The type of chart we want to create\n      type: 'line',\n      // The data for our dataset\n      data: {\n        labels: this.props.months,\n        datasets: [{\n          label: 'Заработано за месяц',\n          borderColor: '#0E53A7',\n          data: this.props.earnedByMonths\n        }]\n      },\n      // Configuration options go here\n      options: {\n        title: {\n          display: true,\n          text: 'Ваши Доходы',\n          fontSize: 15\n        },\n        legend: {\n          position: 'bottom'\n        },\n        scales: {\n          yAxes: [{\n            scaleStartValue: 0,\n            ticks: {\n              max: this.calculateScales().chartMax,\n              min: 0,\n              stepSize: this.calculateScales().stepSize\n            }\n          }]\n        }\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chart-container\"\n      /* style={{'position': 'relative', 'height':'300px', 'width':'300px'}} */\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"canvas\", {\n      ref: this.canvasRef,\n      id: \"chart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/anton/Документы/GitHub/ElbrusHP/freelance_offers/freelance-offers-aggregator/frontend/src/components/LineChart.jsx"],"names":["React","Chart","BarsChart","Component","constructor","props","canvasRef","createRef","calculateScales","bind","chart","undefined","componentDidMount","drawBars","componentDidUpdate","data","datasets","earnedByMonths","options","scales","yAxes","ticks","max","chartMax","stepSize","update","duration","Math","canvas","current","ctx","getContext","clearRect","width","height","type","labels","months","label","borderColor","title","display","text","fontSize","legend","position","scaleStartValue","min","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Chart from 'chart.js';\n\nexport default class BarsChart extends React.Component {\n  constructor(props) {\n    super(props)\n    this.canvasRef = React.createRef()\n    this.calculateScales = this.calculateScales.bind(this)\n    this.chart = undefined\n  }\n\n  componentDidMount() {\n    this.drawBars(this.props);\n  }\n\n  componentDidUpdate() {\n    this.chart.data.datasets[0].data = this.props.earnedByMonths;\n    this.chart.options.scales.yAxes[0].ticks.max = this.calculateScales().chartMax\n    this.chart.options.scales.yAxes[0].ticks.stepSize = this.calculateScales().stepSize\n    this.chart.update({ duration: 2000 });\n  }\n\n  calculateScales() {\n    let chartMax = Math.max(...this.props.earnedByMonths)\n    chartMax = chartMax + (50000 - chartMax%50000)\n    let stepSize = (chartMax >= 150000) ? 50000 : 25000\n    return { chartMax, stepSize }\n  }\n\n  drawBars(props) {\n    const canvas = this.canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    this.chart = new Chart(ctx, {\n      // The type of chart we want to create\n      type: 'line',\n\n      // The data for our dataset\n      data: {\n        labels: this.props.months,\n        datasets: [\n          {\n            label: 'Заработано за месяц',\n            borderColor: '#0E53A7',\n            data: this.props.earnedByMonths,\n          },\n        ]\n      },\n\n      // Configuration options go here\n      options: {\n        title: {\n          display: true,\n          text: 'Ваши Доходы',\n          fontSize: 15,\n        },\n        legend: {\n          position: 'bottom',\n        },\n        scales: {\n          yAxes: [{\n            scaleStartValue: 0,\n            ticks: {\n              max: this.calculateScales().chartMax,\n              min: 0,\n              stepSize: this.calculateScales().stepSize,\n            },\n          }],\n        },\n      },\n    });\n\n  }\n  render() {\n    return (\n      <div className=\"chart-container\" /* style={{'position': 'relative', 'height':'300px', 'width':'300px'}} */>\n        <canvas ref={this.canvasRef} id=\"chart\"></canvas>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}