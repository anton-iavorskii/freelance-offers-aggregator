{"ast":null,"code":"var _jsxFileName = \"/home/anton/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/GitHub/ElbrusHP/phase_3/Z_ITOGOVIY_PROECT/ITOG_FREELANCE_OFFERS/freelance-offers-aggregator/frontend/src/components/pages/LoginModal.jsx\";\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { loginAC } from '../../store/slice.js';\nimport crossImg from \"../../img/cross.svg\";\nexport default function Login({\n  isModal,\n  toggleModal\n}) {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const elRef = useRef(null);\n\n  if (!elRef.current) {\n    const div = document.createElement('div');\n    elRef.current = div;\n  }\n\n  const escFunction = useCallback(event => {\n    if (event.keyCode === 27) {\n      toggleModal();\n    }\n  }, []);\n  useEffect(() => {\n    const modalRoot = document.getElementById('modal');\n    modalRoot.appendChild(elRef.current);\n    document.addEventListener(\"keydown\", escFunction, false);\n    return () => {\n      modalRoot.removeChild(elRef.current);\n      document.removeEventListener(\"keydown\", escFunction, false);\n    };\n  }, []);\n  const initialState = {\n    email: '',\n    password: ''\n  };\n  const [state, setState] = useState(initialState);\n  const axiosQ = axios.create({\n    withCredentials: true\n  });\n\n  const changeHandler = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setState({ ...state,\n      [name]: value\n    });\n  };\n\n  const submitHandler = async e => {\n    e.preventDefault();\n    const response = await axiosQ.post('http://localhost:3003/login', state);\n\n    if (response.status === 200) {\n      setState(initialState);\n      dispatch(loginAC(response.data));\n      toggleModal();\n      history.push('/main');\n    }\n  };\n\n  if (isModal) return createPortal( /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-overlay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: toggleModal,\n    className: \"close-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    width: 20,\n    height: 20,\n    src: crossImg,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"modal-form\",\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"formLable\",\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, \"\\u0415\\u043C\\u0430\\u0439\\u043B\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"login-input\",\n    type: \"email\",\n    name: \"email\",\n    required: true,\n    onChange: changeHandler,\n    value: state.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"formLable\",\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"login-input\",\n    type: \"password\",\n    name: \"password\",\n    required: true,\n    onChange: changeHandler,\n    value: state.password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"login-btn\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\")))), elRef.current);else return null;\n}","map":{"version":3,"sources":["/home/anton/Документы/GitHub/ElbrusHP/phase_3/Z_ITOGOVIY_PROECT/ITOG_FREELANCE_OFFERS/freelance-offers-aggregator/frontend/src/components/pages/LoginModal.jsx"],"names":["React","useEffect","useRef","useState","useCallback","createPortal","useDispatch","useHistory","axios","loginAC","Login","isModal","toggleModal","dispatch","history","elRef","current","div","document","createElement","escFunction","event","keyCode","modalRoot","getElementById","appendChild","addEventListener","removeChild","removeEventListener","initialState","email","password","state","setState","axiosQ","create","withCredentials","changeHandler","e","name","value","target","submitHandler","preventDefault","response","post","status","data","push","crossImg"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react'\nimport { createPortal } from 'react-dom'\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { loginAC } from '../../store/slice.js';\nimport crossImg from '../../img/cross.svg';\n\nexport default function Login({ isModal, toggleModal }) {\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const elRef = useRef(null)\n  if (!elRef.current) {\n    const div = document.createElement('div')\n    elRef.current = div\n  }\n\n  const escFunction = useCallback((event) => {\n    if (event.keyCode === 27) {\n      toggleModal()\n    }\n  }, [])\n\n  useEffect(() => {\n    const modalRoot = document.getElementById('modal')\n    modalRoot.appendChild(elRef.current)\n    document.addEventListener(\"keydown\", escFunction, false);\n    return () => {\n      modalRoot.removeChild(elRef.current)\n      document.removeEventListener(\"keydown\", escFunction, false);\n    }\n  }, [])\n\n  const initialState = {\n    email: '',\n    password: '',\n  };\n  const [state, setState] = useState(initialState)\n\n  const axiosQ = axios.create({ withCredentials: true });\n\n  const changeHandler = (e) => {\n    const { name, value } = e.target\n    setState({ ...state, [name]: value })\n  }\n\n  const submitHandler = async (e) => {\n    e.preventDefault()\n    const response = await axiosQ.post('http://localhost:3003/login', state)\n    if (response.status === 200) {\n      setState(initialState)\n      dispatch(loginAC(response.data))\n      toggleModal()\n      history.push('/main')\n    }\n  }\n\n  if (isModal)\n    return createPortal(\n      <div className=\"modal-overlay\" >\n        <div className=\"modal-login\">\n          <button onClick={toggleModal} className=\"close-modal\">\n            <img width={20} height={20} src={crossImg} alt=\"\"></img>\n          </button>\n          <h3 className=\"modal-header\">Войти</h3>\n          <form className=\"modal-form\" onSubmit={submitHandler}>\n            <label className=\"formLable\" htmlFor=\"email\">Емайл</label>\n            <input className=\"login-input\" type=\"email\" name=\"email\" required onChange={changeHandler} value={state.email} />\n            <label className=\"formLable\" htmlFor=\"password\">Пароль</label>\n            <input className=\"login-input\" type=\"password\" name=\"password\" required onChange={changeHandler} value={state.password} />\n            <button className=\"login-btn\" type=\"submit\">Войти</button>\n          </form>\n        </div>\n      </div>\n      , elRef.current\n    )\n  else return null\n}\n"]},"metadata":{},"sourceType":"module"}