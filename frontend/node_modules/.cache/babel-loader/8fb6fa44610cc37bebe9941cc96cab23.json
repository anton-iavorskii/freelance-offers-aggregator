{"ast":null,"code":"var _jsxFileName = \"/home/anton/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/GitHub/ElbrusHP/phase_3/Z_ITOGOVIY_PROECT/ITOG_FREELANCE_OFFERS/freelance-offers-aggregator/frontend/src/components/pages/SignupModal.jsx\";\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { loginAC } from '../../store/slice.js';\nimport crossImg from \"../../img/cross.svg\";\nexport default function Login({\n  isModal,\n  toggleModal\n}) {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const elRef = useRef(null);\n\n  if (!elRef.current) {\n    const div = document.createElement('div');\n    elRef.current = div;\n  }\n\n  const escFunction = useCallback(event => {\n    if (event.keyCode === 27) {\n      toggleModal();\n    }\n  }, []);\n  useEffect(() => {\n    const modalRoot = document.getElementById('modal');\n    modalRoot.appendChild(elRef.current);\n    document.addEventListener(\"keydown\", escFunction, false);\n    return () => {\n      modalRoot.removeChild(elRef.current);\n      document.removeEventListener(\"keydown\", escFunction, false);\n    };\n  }, []);\n  const initialState = {\n    firstName: '',\n    lastName: '',\n    email: '',\n    password: '',\n    password2: ''\n  };\n  const [state, setState] = useState(initialState);\n  const axiosQ = axios.create({\n    withCredentials: true\n  });\n\n  const changeHandler = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setState({ ...state,\n      [name]: value\n    });\n  };\n\n  const submitHandler = async e => {\n    e.preventDefault();\n    const response = await axiosQ.post('http://localhost:3003/signup', state);\n\n    if (response.status === 200) {\n      setState(initialState);\n      dispatch(loginAC(response.data));\n      toggleModal();\n      history.push('/');\n    }\n  };\n\n  if (isModal) return createPortal( /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-overlay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: toggleModal,\n    className: \"close-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    width: 20,\n    height: 20,\n    src: crossImg,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"modal-form\",\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"formLable\",\n    htmlFor: \"firstName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, \"\\u0418\\u043C\\u044F\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"reg-input\",\n    type: \"text\",\n    name: \"firstName\",\n    required: true,\n    onChange: changeHandler,\n    value: state.firstName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"formLable\",\n    htmlFor: \"lastName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, \"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"reg-input\",\n    type: \"text\",\n    name: \"lastName\",\n    required: true,\n    onChange: changeHandler,\n    value: state.lastName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"formLable\",\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, \"\\u0415\\u043C\\u0430\\u0439\\u043B\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"reg-input\",\n    type: \"email\",\n    name: \"email\",\n    required: true,\n    onChange: changeHandler,\n    value: state.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"formLable\",\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"reg-input\",\n    type: \"password\",\n    name: \"password\",\n    required: true,\n    onChange: changeHandler,\n    value: state.password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"formLable\",\n    htmlFor: \"password2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, \"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"reg-input\",\n    type: \"password\",\n    name: \"password2\",\n    required: true,\n    onChange: changeHandler,\n    value: state.password2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"reg-btn\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\")))), elRef.current);else return null;\n}","map":{"version":3,"sources":["/home/anton/Документы/GitHub/ElbrusHP/phase_3/Z_ITOGOVIY_PROECT/ITOG_FREELANCE_OFFERS/freelance-offers-aggregator/frontend/src/components/pages/SignupModal.jsx"],"names":["React","useEffect","useRef","useState","useCallback","createPortal","useDispatch","useHistory","axios","loginAC","Login","isModal","toggleModal","dispatch","history","elRef","current","div","document","createElement","escFunction","event","keyCode","modalRoot","getElementById","appendChild","addEventListener","removeChild","removeEventListener","initialState","firstName","lastName","email","password","password2","state","setState","axiosQ","create","withCredentials","changeHandler","e","name","value","target","submitHandler","preventDefault","response","post","status","data","push","crossImg"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,EAAmCC,QAAnC,EAA6CC,WAA7C,QAAgE,OAAhE;AACA,SAASC,YAAT,QAA6B,WAA7B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,sBAAxB;;AAGA,eAAe,SAASC,KAAT,CAAe;AAAEC,EAAAA,OAAF;AAAWC,EAAAA;AAAX,CAAf,EAAyC;AAEtD,QAAMC,QAAQ,GAAGP,WAAW,EAA5B;AACA,QAAMQ,OAAO,GAAGP,UAAU,EAA1B;AAEA,QAAMQ,KAAK,GAAGb,MAAM,CAAC,IAAD,CAApB;;AACA,MAAI,CAACa,KAAK,CAACC,OAAX,EAAoB;AAClB,UAAMC,GAAG,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAZ;AACAJ,IAAAA,KAAK,CAACC,OAAN,GAAgBC,GAAhB;AACD;;AAED,QAAMG,WAAW,GAAGhB,WAAW,CAAEiB,KAAD,IAAW;AACzC,QAAIA,KAAK,CAACC,OAAN,KAAkB,EAAtB,EAA0B;AACxBV,MAAAA,WAAW;AACZ;AACF,GAJ8B,EAI5B,EAJ4B,CAA/B;AAMAX,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMsB,SAAS,GAAGL,QAAQ,CAACM,cAAT,CAAwB,OAAxB,CAAlB;AACAD,IAAAA,SAAS,CAACE,WAAV,CAAsBV,KAAK,CAACC,OAA5B;AACAE,IAAAA,QAAQ,CAACQ,gBAAT,CAA0B,SAA1B,EAAqCN,WAArC,EAAkD,KAAlD;AACA,WAAO,MAAM;AACXG,MAAAA,SAAS,CAACI,WAAV,CAAsBZ,KAAK,CAACC,OAA5B;AACAE,MAAAA,QAAQ,CAACU,mBAAT,CAA6B,SAA7B,EAAwCR,WAAxC,EAAqD,KAArD;AACD,KAHD;AAID,GARQ,EAQN,EARM,CAAT;AAWA,QAAMS,YAAY,GAAG;AACnBC,IAAAA,SAAS,EAAE,EADQ;AAEnBC,IAAAA,QAAQ,EAAE,EAFS;AAGnBC,IAAAA,KAAK,EAAE,EAHY;AAInBC,IAAAA,QAAQ,EAAE,EAJS;AAKnBC,IAAAA,SAAS,EAAE;AALQ,GAArB;AAOA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBjC,QAAQ,CAAC0B,YAAD,CAAlC;AAEA,QAAMQ,MAAM,GAAG7B,KAAK,CAAC8B,MAAN,CAAa;AAAEC,IAAAA,eAAe,EAAE;AAAnB,GAAb,CAAf;;AAEA,QAAMC,aAAa,GAAIC,CAAD,IAAO;AAC3B,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBF,CAAC,CAACG,MAA1B;AACAR,IAAAA,QAAQ,CAAC,EAAE,GAAGD,KAAL;AAAY,OAACO,IAAD,GAAQC;AAApB,KAAD,CAAR;AACD,GAHD;;AAKA,QAAME,aAAa,GAAG,MAAOJ,CAAP,IAAa;AACjCA,IAAAA,CAAC,CAACK,cAAF;AACA,UAAMC,QAAQ,GAAG,MAAMV,MAAM,CAACW,IAAP,CAAY,8BAAZ,EAA4Cb,KAA5C,CAAvB;;AACA,QAAIY,QAAQ,CAACE,MAAT,KAAoB,GAAxB,EAA6B;AAC3Bb,MAAAA,QAAQ,CAACP,YAAD,CAAR;AACAhB,MAAAA,QAAQ,CAACJ,OAAO,CAACsC,QAAQ,CAACG,IAAV,CAAR,CAAR;AACAtC,MAAAA,WAAW;AACXE,MAAAA,OAAO,CAACqC,IAAR,CAAa,GAAb;AACD;AACF,GATD;;AAWA,MAAIxC,OAAJ,EACE,OAAON,YAAY,eACjB;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,OAAO,EAAEO,WAAjB;AAA8B,IAAA,SAAS,EAAC,aAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,KAAK,EAAE,EAAZ;AAAgB,IAAA,MAAM,EAAE,EAAxB;AAA4B,IAAA,GAAG,EAAEwC,QAAjC;AAA2C,IAAA,GAAG,EAAC,EAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAIE;AAAI,IAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oHAJF,eAKE;AAAM,IAAA,SAAS,EAAC,YAAhB;AAA6B,IAAA,QAAQ,EAAEP,aAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,OAAO,EAAC,WAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFF,eAGE;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,IAAI,EAAC,MAAlC;AAAyC,IAAA,IAAI,EAAC,WAA9C;AAA0D,IAAA,QAAQ,MAAlE;AAAmE,IAAA,QAAQ,EAAEL,aAA7E;AAA4F,IAAA,KAAK,EAAEL,KAAK,CAACL,SAAzG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,eAKE;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,OAAO,EAAC,UAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDALF,eAME;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,IAAI,EAAC,MAAlC;AAAyC,IAAA,IAAI,EAAC,UAA9C;AAAyD,IAAA,QAAQ,MAAjE;AAAkE,IAAA,QAAQ,EAAEU,aAA5E;AAA2F,IAAA,KAAK,EAAEL,KAAK,CAACJ,QAAxG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,eAQE;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,OAAO,EAAC,OAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCARF,eASE;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,IAAI,EAAC,OAAlC;AAA0C,IAAA,IAAI,EAAC,OAA/C;AAAuD,IAAA,QAAQ,MAA/D;AAAgE,IAAA,QAAQ,EAAES,aAA1E;AAAyF,IAAA,KAAK,EAAEL,KAAK,CAACH,KAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,eAWE;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,OAAO,EAAC,UAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAXF,eAYE;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,IAAI,EAAC,UAAlC;AAA6C,IAAA,IAAI,EAAC,UAAlD;AAA6D,IAAA,QAAQ,MAArE;AAAsE,IAAA,QAAQ,EAAEQ,aAAhF;AAA+F,IAAA,KAAK,EAAEL,KAAK,CAACF,QAA5G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZF,eAaE;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,OAAO,EAAC,WAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mGAbF,eAeE;AAAO,IAAA,SAAS,EAAC,WAAjB;AAA6B,IAAA,IAAI,EAAC,UAAlC;AAA6C,IAAA,IAAI,EAAC,WAAlD;AAA8D,IAAA,QAAQ,MAAtE;AAAuE,IAAA,QAAQ,EAAEO,aAAjF;AAAgG,IAAA,KAAK,EAAEL,KAAK,CAACD,SAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfF,eAgBE;AAAQ,IAAA,SAAS,EAAC,SAAlB;AAA4B,IAAA,IAAI,EAAC,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oHAhBF,CALF,CADF,CADiB,EA0BTnB,KAAK,CAACC,OA1BG,CAAnB,CADF,KA6BK,OAAO,IAAP;AACN","sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react'\nimport { createPortal } from 'react-dom'\nimport { useDispatch } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport axios from 'axios'\nimport { loginAC } from '../../store/slice.js'\nimport crossImg from '../../img/cross.svg';\n\nexport default function Login({ isModal, toggleModal }) {\n\n  const dispatch = useDispatch()\n  const history = useHistory()\n\n  const elRef = useRef(null)\n  if (!elRef.current) {\n    const div = document.createElement('div')\n    elRef.current = div\n  }\n\n  const escFunction = useCallback((event) => {\n    if (event.keyCode === 27) {\n      toggleModal()\n    }\n  }, [])\n\n  useEffect(() => {\n    const modalRoot = document.getElementById('modal')\n    modalRoot.appendChild(elRef.current)\n    document.addEventListener(\"keydown\", escFunction, false);\n    return () => {\n      modalRoot.removeChild(elRef.current)\n      document.removeEventListener(\"keydown\", escFunction, false);\n    }\n  }, [])\n\n\n  const initialState = {\n    firstName: '',\n    lastName: '',\n    email: '',\n    password: '',\n    password2: ''\n  };\n  const [state, setState] = useState(initialState)\n\n  const axiosQ = axios.create({ withCredentials: true });\n\n  const changeHandler = (e) => {\n    const { name, value } = e.target\n    setState({ ...state, [name]: value })\n  }\n\n  const submitHandler = async (e) => {\n    e.preventDefault()\n    const response = await axiosQ.post('http://localhost:3003/signup', state)\n    if (response.status === 200) {\n      setState(initialState)\n      dispatch(loginAC(response.data))\n      toggleModal()\n      history.push('/')\n    }\n  }\n\n  if (isModal)\n    return createPortal(\n      <div className=\"modal-overlay\" >\n        <div className=\"modal-signup\">\n          <button onClick={toggleModal} className=\"close-modal\">\n            <img width={20} height={20} src={crossImg} alt=\"\"></img>\n          </button>\n          <h3 className=\"modal-header\">Зарегистрироваться</h3>\n          <form className=\"modal-form\" onSubmit={submitHandler}>\n\n            <label className=\"formLable\" htmlFor=\"firstName\">Имя</label>\n            <input className=\"reg-input\" type=\"text\" name=\"firstName\" required onChange={changeHandler} value={state.firstName} />\n\n            <label className=\"formLable\" htmlFor=\"lastName\">Фамилия</label>\n            <input className=\"reg-input\" type=\"text\" name=\"lastName\" required onChange={changeHandler} value={state.lastName} />\n\n            <label className=\"formLable\" htmlFor=\"email\">Емайл</label>\n            <input className=\"reg-input\" type=\"email\" name=\"email\" required onChange={changeHandler} value={state.email} />\n\n            <label className=\"formLable\" htmlFor=\"password\">Пароль</label>\n            <input className=\"reg-input\" type=\"password\" name=\"password\" required onChange={changeHandler} value={state.password} />\n            <label className=\"formLable\" htmlFor=\"password2\">Повторите пароль</label>\n\n            <input className=\"reg-input\" type=\"password\" name=\"password2\" required onChange={changeHandler} value={state.password2} />\n            <button className=\"reg-btn\" type=\"submit\">Зарегистрироваться</button>\n          </form>\n        </div>\n      </div>, elRef.current\n    )\n  else return null\n}\n"]},"metadata":{},"sourceType":"module"}